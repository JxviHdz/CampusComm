{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joseg\\\\OneDrive\\\\Desktop\\\\CampusComm\\\\src\\\\Chat.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport './App.css';\nimport firebase, { auth } from \"./firebase\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useCollection, useCollectionData } from \"react-firebase-hooks/firestore\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Avatar, Badge, Box, Divider, fade, Grid, IconButton, InputBase, Paper, Typography } from \"@material-ui/core\";\nimport { MailOutline } from \"@material-ui/icons\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport pink from \"@material-ui/core/colors/pink\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport red from \"@material-ui/core/colors/red\";\nimport green from \"@material-ui/core/colors/green\";\nimport yellow from \"@material-ui/core/colors/yellow\";\nimport { useHistory } from \"react-router-dom\"; // TODO\n//  (still present after pauls update at 2:33 UK)\n//  Catch when user is not logged\n//  Fix bug when user is not signed in with google\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  profilePicture: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    margin: \"10px\",\n    border: \"0px solid black\",\n    width: \"50px\",\n    height: \"50px\",\n    '&:hover': {\n      cursor: \"pointer\"\n    }\n  },\n  sorting: {\n    marginLeft: \"30px\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginRight: \"30px\",\n    alignItems: \"center\"\n  },\n  searchBox: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    marginRight: \"30px\",\n    alignItems: \"center\"\n  },\n  search: {\n    flexGrow: 1,\n    maxWidth: \"100%\",\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    },\n    width: '100%'\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: 'inherit'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%'\n  },\n  textBox: {\n    '&:hover': {\n      cursor: \"pointer\"\n    }\n  }\n}));\nconst firestore = firebase.firestore();\nvar userID = null;\n\nfunction ProfileCard(props) {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const colours = [deepOrange[500], pink[400], blue[300], red[500], green[500], yellow[500]];\n\n  function randomChoice(arr) {\n    return arr[Math.floor(arr.length * Math.random())];\n  }\n\n  const avatarColour = randomChoice(colours);\n\n  function redirect(path, state) {\n    history.push(path, state);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 4,\n    lg: 3,\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        p: 1,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(Avatar, {\n              src: props.pp,\n              className: classes.profilePicture,\n              alt: \"Profile Image\",\n              style: {\n                backgroundColor: `${avatarColour}`\n              },\n              onClick: () => {\n                redirect(\"/profile\", {\n                  targetUserID: props.targetUserID,\n                  currentUserID: props.myUid\n                });\n              },\n              children: props.name ? props.name.charAt(0) : \"N\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            item: true,\n            xs: 7,\n            className: classes.textBox,\n            onClick: () => {\n              redirect(\"/chatroom\", {\n                targetUserID: props.targetUserID,\n                currentUserID: props.myUid,\n                myUID: userID\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                style: {\n                  fontSize: \"24px\"\n                },\n                display: \"block\",\n                children: props.name.charAt(0).toUpperCase() + props.name.substr(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                style: {\n                  fontSize: \"18px\"\n                },\n                color: \"textSecondary\",\n                display: \"block\",\n                children: props.unread\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            item: true,\n            xs: 2,\n            className: classes.textBox,\n            onClick: () => {\n              redirect(\"/chatroom\", {\n                targetUserID: props.targetUserID,\n                currentUserID: props.myUid,\n                myUID: userID\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"flex-end\",\n              children: /*#__PURE__*/_jsxDEV(Badge, {\n                badgeContent: props.unseenCount,\n                color: \"secondary\",\n                children: /*#__PURE__*/_jsxDEV(IconButton, {\n                  children: /*#__PURE__*/_jsxDEV(MailOutline, {\n                    style: {\n                      fontSize: \"38px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProfileCard, \"cXZz/rbrhPrjL6gJaTc75NCtuak=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = ProfileCard;\n\nfunction Chat() {\n  _s2();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const [user] = useAuthState(auth);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  var results = [];\n  var numberOfResults = 0;\n  if (user != null) userID = user.uid;\n  const userRef = firestore.collection('users').where('ID', \"==\", userID);\n  const unseenMessagesRef = firestore.collection('users/' + userID + \"/chats\").where('seen', \"==\", \"false\");\n  var [unseenMessages, loadingMes] = useCollectionData(unseenMessagesRef);\n  var [me, loading] = useCollectionData(userRef);\n  var myChats = [];\n  if (!loading) myChats = me[0].chattingWith;\n  const [searchVal, setSearch] = useState(\"\");\n  var unseen = 0;\n\n  if (!loadingMes) {\n    unseen = unseenMessages.length;\n  }\n\n  const [users, loadingUsers] = useCollection(firestore.collection('users'));\n\n  const editSearchTerm = e => {\n    setSearch(e.target.value);\n  }; // Searching for a user\n\n\n  const search = () => {\n    results = [];\n    numberOfResults = 0;\n\n    if (!loadingUsers) {\n      users.forEach(usr => {\n        let name = usr.data().Name;\n        let profilePicture = usr.data().profilePicture;\n\n        if (name.toLowerCase().includes(searchVal.toLowerCase()) && usr.id != user.uid && myChats && myChats.includes(usr.id)) {\n          var count = 0;\n          unseenMessages.forEach(msg => {\n            if (msg.SenderID == usr.data().ID) count++;\n          });\n          results[numberOfResults] = [{\n            name: usr.data().Name,\n            id: usr.data().ID,\n            unseenMes: count,\n            pp: profilePicture\n          }];\n          numberOfResults++;\n        }\n      });\n    } else {}\n\n    return results;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !user ? history.push(\"./menu\") : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        m: 3,\n        stlye: {\n          marginBottom: \"-30px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h2\",\n          children: \"Your Chats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        variant: \"middle\",\n        style: {\n          marginBottom: \"20px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        className: \"sortingRow\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.sorting,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            display: \"inline\",\n            stlye: {\n              marginLeft: \"20px\",\n              justifyContent: \"flex-start\"\n            },\n            children: [unseen, \" unseen messages\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            className: classes.searchBox,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              display: \"inline\",\n              style: {\n                marginRight: \"10px\"\n              },\n              children: \"Filter:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.search,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.searchIcon,\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n                fullWidth: true,\n                placeholder: \"Search\\u2026\",\n                classes: {\n                  root: classes.inputRoot,\n                  input: classes.inputInput\n                },\n                style: {\n                  justifyContent: \"center\",\n                  alignItems: \"center\"\n                },\n                inputProps: {\n                  'aria-label': 'search'\n                },\n                onChange: editSearchTerm\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ResultContainer, {\n        names: search()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 47\n    }, this)\n  }, void 0, false);\n}\n\n_s2(Chat, \"IdnZPDTM0WJoK/PhGZA5py1nqYM=\", false, function () {\n  return [useStyles, useHistory, useAuthState, useCollectionData, useCollectionData, useCollection];\n});\n\n_c2 = Chat;\n\nfunction ResultContainer(names) {\n  return /*#__PURE__*/_jsxDEV(Box, {\n    p: 3,\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: names.names.map(name => /*#__PURE__*/_jsxDEV(Name, {\n        name: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 42\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 9\n  }, this);\n}\n\n_c3 = ResultContainer;\n\nfunction Name(name) {\n  var unread = \"No new messages\";\n  return /*#__PURE__*/_jsxDEV(ProfileCard, {\n    name: name.name[0].name,\n    unseenCount: name.name[0].unseenMes,\n    unread: unread,\n    targetUserID: name.name[0].id,\n    myUid: userID,\n    pp: name.name[0].pp\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 9\n  }, this);\n}\n\n_c4 = Name;\nexport default Chat;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ProfileCard\");\n$RefreshReg$(_c2, \"Chat\");\n$RefreshReg$(_c3, \"ResultContainer\");\n$RefreshReg$(_c4, \"Name\");","map":{"version":3,"sources":["C:/Users/joseg/OneDrive/Desktop/CampusComm/src/Chat.js"],"names":["React","useState","firebase","auth","useAuthState","useCollection","useCollectionData","makeStyles","Avatar","Badge","Box","Divider","fade","Grid","IconButton","InputBase","Paper","Typography","MailOutline","SearchIcon","deepOrange","pink","blue","red","green","yellow","useHistory","useStyles","theme","root","flexGrow","profilePicture","display","justifyContent","margin","border","width","height","cursor","sorting","marginLeft","marginRight","alignItems","searchBox","search","maxWidth","position","borderRadius","shape","backgroundColor","palette","common","white","breakpoints","up","spacing","searchIcon","padding","pointerEvents","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","textBox","firestore","userID","ProfileCard","props","classes","history","colours","randomChoice","arr","Math","floor","length","random","avatarColour","redirect","path","state","push","pp","targetUserID","currentUserID","myUid","name","charAt","myUID","fontSize","toUpperCase","substr","unread","unseenCount","Chat","user","searchTerm","setSearchTerm","results","numberOfResults","uid","userRef","collection","where","unseenMessagesRef","unseenMessages","loadingMes","me","loading","myChats","chattingWith","searchVal","setSearch","unseen","users","loadingUsers","editSearchTerm","e","target","value","forEach","usr","data","Name","toLowerCase","includes","id","count","msg","SenderID","ID","unseenMes","marginBottom","input","ResultContainer","names","map"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,OAAO,WAAP;AACA,OAAOC,QAAP,IAAkBC,IAAlB,QAA6B,YAA7B;AACA,SAAQC,YAAR,QAA2B,2BAA3B;AACA,SAAQC,aAAR,EAAuBC,iBAAvB,QAA+C,gCAA/C;AACA,SAAQC,UAAR,QAAyB,qBAAzB;AACA,SAAQC,MAAR,EAAgBC,KAAhB,EAAuBC,GAAvB,EAA4BC,OAA5B,EAAqCC,IAArC,EAA2CC,IAA3C,EAAiDC,UAAjD,EAA6DC,SAA7D,EAAwEC,KAAxE,EAA+EC,UAA/E,QAAgG,mBAAhG;AACA,SAAQC,WAAR,QAA0B,oBAA1B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,OAAOC,IAAP,MAAiB,+BAAjB;AACA,OAAOC,IAAP,MAAiB,+BAAjB;AACA,OAAOC,GAAP,MAAgB,8BAAhB;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AACA,OAAOC,MAAP,MAAmB,iCAAnB;AACA,SAAQC,UAAR,QAAyB,kBAAzB,C,CAEA;AACA;AACA;AACA;;;;AAEA,MAAMC,SAAS,GAAGpB,UAAU,CAAEqB,KAAD,KAAY;AACrCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,QAAQ,EAAE;AADR,GAD+B;AAIrCC,EAAAA,cAAc,EAAE;AACZC,IAAAA,OAAO,EAAE,MADG;AAEZC,IAAAA,cAAc,EAAE,QAFJ;AAGZC,IAAAA,MAAM,EAAE,MAHI;AAIZC,IAAAA,MAAM,EAAE,iBAJI;AAKZC,IAAAA,KAAK,EAAE,MALK;AAMZC,IAAAA,MAAM,EAAE,MANI;AAOZ,eAAW;AACPC,MAAAA,MAAM,EAAE;AADD;AAPC,GAJqB;AAerCC,EAAAA,OAAO,EAAE;AACLC,IAAAA,UAAU,EAAE,MADP;AAELR,IAAAA,OAAO,EAAE,MAFJ;AAGLC,IAAAA,cAAc,EAAE,eAHX;AAILQ,IAAAA,WAAW,EAAE,MAJR;AAKLC,IAAAA,UAAU,EAAE;AALP,GAf4B;AAsBrCC,EAAAA,SAAS,EAAE;AACPX,IAAAA,OAAO,EAAE,MADF;AAEPC,IAAAA,cAAc,EAAE,UAFT;AAGPQ,IAAAA,WAAW,EAAE,MAHN;AAIPC,IAAAA,UAAU,EAAE;AAJL,GAtB0B;AA4BrCE,EAAAA,MAAM,EAAE;AACJd,IAAAA,QAAQ,EAAE,CADN;AAEJe,IAAAA,QAAQ,EAAE,MAFN;AAGJC,IAAAA,QAAQ,EAAE,UAHN;AAIJC,IAAAA,YAAY,EAAEnB,KAAK,CAACoB,KAAN,CAAYD,YAJtB;AAKJE,IAAAA,eAAe,EAAErC,IAAI,CAACgB,KAAK,CAACsB,OAAN,CAAcC,MAAd,CAAqBC,KAAtB,EAA6B,IAA7B,CALjB;AAMJ,eAAW;AACPH,MAAAA,eAAe,EAAErC,IAAI,CAACgB,KAAK,CAACsB,OAAN,CAAcC,MAAd,CAAqBC,KAAtB,EAA6B,IAA7B;AADd,KANP;AASJ,KAACxB,KAAK,CAACyB,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC1Bd,MAAAA,UAAU,EAAEZ,KAAK,CAAC2B,OAAN,CAAc,CAAd,CADc;AAE1BnB,MAAAA,KAAK,EAAE;AAFmB,KAT1B;AAaJA,IAAAA,KAAK,EAAE;AAbH,GA5B6B;AA2CrCoB,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAE7B,KAAK,CAAC2B,OAAN,CAAc,CAAd,EAAiB,CAAjB,CADD;AAERlB,IAAAA,MAAM,EAAE,MAFA;AAGRS,IAAAA,QAAQ,EAAE,UAHF;AAIRY,IAAAA,aAAa,EAAE,MAJP;AAKR1B,IAAAA,OAAO,EAAE,MALD;AAMRU,IAAAA,UAAU,EAAE,QANJ;AAORT,IAAAA,cAAc,EAAE;AAPR,GA3CyB;AAoDrC0B,EAAAA,SAAS,EAAE;AACPC,IAAAA,KAAK,EAAE;AADA,GApD0B;AAuDrCC,EAAAA,UAAU,EAAE;AACRJ,IAAAA,OAAO,EAAE7B,KAAK,CAAC2B,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CADD;AAER;AACAO,IAAAA,WAAW,EAAG,cAAalC,KAAK,CAAC2B,OAAN,CAAc,CAAd,CAAiB,KAHpC;AAIRQ,IAAAA,UAAU,EAAEnC,KAAK,CAACoC,WAAN,CAAkBC,MAAlB,CAAyB,OAAzB,CAJJ;AAKR7B,IAAAA,KAAK,EAAE;AALC,GAvDyB;AA8DrC8B,EAAAA,OAAO,EAAE;AACL,eAAW;AACP5B,MAAAA,MAAM,EAAE;AADD;AADN;AA9D4B,CAAZ,CAAD,CAA5B;AAqEA,MAAM6B,SAAS,GAAGjE,QAAQ,CAACiE,SAAT,EAAlB;AACA,IAAIC,MAAM,GAAG,IAAb;;AAEA,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAAA;;AACxB,QAAMC,OAAO,GAAG5C,SAAS,EAAzB;AACA,QAAM6C,OAAO,GAAG9C,UAAU,EAA1B;AACA,QAAM+C,OAAO,GAAG,CAACrD,UAAU,CAAC,GAAD,CAAX,EAAkBC,IAAI,CAAC,GAAD,CAAtB,EAA6BC,IAAI,CAAC,GAAD,CAAjC,EAAwCC,GAAG,CAAC,GAAD,CAA3C,EAAkDC,KAAK,CAAC,GAAD,CAAvD,EAA8DC,MAAM,CAAC,GAAD,CAApE,CAAhB;;AAEA,WAASiD,YAAT,CAAsBC,GAAtB,EAA2B;AACvB,WAAOA,GAAG,CAACC,IAAI,CAACC,KAAL,CAAWF,GAAG,CAACG,MAAJ,GAAaF,IAAI,CAACG,MAAL,EAAxB,CAAD,CAAV;AACH;;AAED,QAAMC,YAAY,GAAGN,YAAY,CAACD,OAAD,CAAjC;;AAGA,WAASQ,QAAT,CAAkBC,IAAlB,EAAwBC,KAAxB,EAA+B;AAC3BX,IAAAA,OAAO,CAACY,IAAR,CAAaF,IAAb,EAAmBC,KAAnB;AACH;;AAGD,sBACI,QAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAA0B,IAAA,EAAE,EAAE,CAA9B;AAAiC,IAAA,EAAE,EAAE,CAArC;AAAA,2BACI,QAAC,KAAD;AAAA,6BACI,QAAC,GAAD;AAAK,QAAA,CAAC,EAAE,CAAR;AAAA,+BACI,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAA,kCACI,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAA,mCACI,QAAC,MAAD;AAAQ,cAAA,GAAG,EAAEb,KAAK,CAACe,EAAnB;AAAuB,cAAA,SAAS,EAAEd,OAAO,CAACxC,cAA1C;AAA0D,cAAA,GAAG,EAAC,eAA9D;AACQ,cAAA,KAAK,EAAE;AAACkB,gBAAAA,eAAe,EAAG,GAAE+B,YAAa;AAAlC,eADf;AACqD,cAAA,OAAO,EAAE,MAAM;AAChEC,gBAAAA,QAAQ,CAAC,UAAD,EAAa;AACjBK,kBAAAA,YAAY,EAAEhB,KAAK,CAACgB,YADH;AAEjBC,kBAAAA,aAAa,EAAEjB,KAAK,CAACkB;AAFJ,iBAAb,CAAR;AAIH,eAND;AAAA,wBAOKlB,KAAK,CAACmB,IAAN,GAAanB,KAAK,CAACmB,IAAN,CAAWC,MAAX,CAAkB,CAAlB,CAAb,GAAoC;AAPzC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAYI,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,IAAI,MAApB;AAAqB,YAAA,EAAE,EAAE,CAAzB;AAA4B,YAAA,SAAS,EAAEnB,OAAO,CAACL,OAA/C;AAAwD,YAAA,OAAO,EAAE,MAAM;AACnEe,cAAAA,QAAQ,CAAC,WAAD,EAAc;AAClBK,gBAAAA,YAAY,EAAEhB,KAAK,CAACgB,YADF;AAElBC,gBAAAA,aAAa,EAAEjB,KAAK,CAACkB,KAFH;AAGlBG,gBAAAA,KAAK,EAAEvB;AAHW,eAAd,CAAR;AAKH,aAND;AAAA,oCAOI,QAAC,IAAD;AAAM,cAAA,IAAI,MAAV;AAAW,cAAA,EAAE,EAAE,EAAf;AAAA,qCACI,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAC,IAApB;AAAyB,gBAAA,KAAK,EAAE;AAACwB,kBAAAA,QAAQ,EAAE;AAAX,iBAAhC;AAAoD,gBAAA,OAAO,EAAC,OAA5D;AAAA,0BACKtB,KAAK,CAACmB,IAAN,CAAWC,MAAX,CAAkB,CAAlB,EAAqBG,WAArB,KAAqCvB,KAAK,CAACmB,IAAN,CAAWK,MAAX,CAAkB,CAAlB;AAD1C;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAPJ,eAYI,QAAC,IAAD;AAAM,cAAA,IAAI,MAAV;AAAW,cAAA,EAAE,EAAE,EAAf;AAAA,qCACI,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAC,OAApB;AAA4B,gBAAA,KAAK,EAAE;AAACF,kBAAAA,QAAQ,EAAE;AAAX,iBAAnC;AAAuD,gBAAA,KAAK,EAAC,eAA7D;AACY,gBAAA,OAAO,EAAC,OADpB;AAAA,0BAEKtB,KAAK,CAACyB;AAFX;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBAZJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZJ,eA+BI,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,IAAI,MAApB;AAAqB,YAAA,EAAE,EAAE,CAAzB;AAA4B,YAAA,SAAS,EAAExB,OAAO,CAACL,OAA/C;AAAwD,YAAA,OAAO,EAAE,MAAM;AACnEe,cAAAA,QAAQ,CAAC,WAAD,EAAc;AAClBK,gBAAAA,YAAY,EAAEhB,KAAK,CAACgB,YADF;AAElBC,gBAAAA,aAAa,EAAEjB,KAAK,CAACkB,KAFH;AAGlBG,gBAAAA,KAAK,EAAEvB;AAHW,eAAd,CAAR;AAKH,aAND;AAAA,mCAOI,QAAC,GAAD;AAAK,cAAA,OAAO,EAAC,MAAb;AAAoB,cAAA,UAAU,EAAC,QAA/B;AAAwC,cAAA,cAAc,EAAC,UAAvD;AAAA,qCACI,QAAC,KAAD;AAAO,gBAAA,YAAY,EAAEE,KAAK,CAAC0B,WAA3B;AAAwC,gBAAA,KAAK,EAAC,WAA9C;AAAA,uCACI,QAAC,UAAD;AAAA,yCACI,QAAC,WAAD;AAAa,oBAAA,KAAK,EAAE;AAACJ,sBAAAA,QAAQ,EAAE;AAAX;AAApB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AAPJ;AAAA;AAAA;AAAA;AAAA,kBA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAuDH;;GAxEQvB,W;UACW1C,S,EACAD,U;;;KAFX2C,W;;AA0ET,SAAS4B,IAAT,GAAgB;AAAA;;AAEZ,QAAM1B,OAAO,GAAG5C,SAAS,EAAzB;AACA,QAAM6C,OAAO,GAAG9C,UAAU,EAA1B;AACA,QAAM,CAACwE,IAAD,IAAS9F,YAAY,CAACD,IAAD,CAA3B;AACA,QAAM,CAACgG,UAAD,EAAaC,aAAb,IAA8BnG,QAAQ,CAAC,EAAD,CAA5C;AAEA,MAAIoG,OAAO,GAAG,EAAd;AACA,MAAIC,eAAe,GAAG,CAAtB;AAEA,MAAIJ,IAAI,IAAI,IAAZ,EAAkB9B,MAAM,GAAG8B,IAAI,CAACK,GAAd;AAElB,QAAMC,OAAO,GAAGrC,SAAS,CAACsC,UAAV,CAAqB,OAArB,EAA8BC,KAA9B,CAAoC,IAApC,EAA0C,IAA1C,EAAgDtC,MAAhD,CAAhB;AACA,QAAMuC,iBAAiB,GAAGxC,SAAS,CAACsC,UAAV,CAAqB,WAAWrC,MAAX,GAAoB,QAAzC,EAAmDsC,KAAnD,CAAyD,MAAzD,EAAiE,IAAjE,EAAuE,OAAvE,CAA1B;AAEA,MAAI,CAACE,cAAD,EAAiBC,UAAjB,IAA+BvG,iBAAiB,CAACqG,iBAAD,CAApD;AAEA,MAAI,CAACG,EAAD,EAAKC,OAAL,IAAgBzG,iBAAiB,CAACkG,OAAD,CAArC;AACA,MAAIQ,OAAO,GAAG,EAAd;AACA,MAAI,CAACD,OAAL,EAAcC,OAAO,GAAGF,EAAE,CAAC,CAAD,CAAF,CAAMG,YAAhB;AACd,QAAM,CAACC,SAAD,EAAYC,SAAZ,IAAyBlH,QAAQ,CAAC,EAAD,CAAvC;AAEA,MAAImH,MAAM,GAAG,CAAb;;AAEA,MAAI,CAACP,UAAL,EAAiB;AACbO,IAAAA,MAAM,GAAGR,cAAc,CAAC9B,MAAxB;AACH;;AAED,QAAM,CAACuC,KAAD,EAAQC,YAAR,IAAwBjH,aAAa,CAAC8D,SAAS,CAACsC,UAAV,CAAqB,OAArB,CAAD,CAA3C;;AAEA,QAAMc,cAAc,GAAIC,CAAD,IAAO;AAC1BL,IAAAA,SAAS,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT;AACH,GAFD,CA9BY,CAkCZ;;;AACA,QAAM9E,MAAM,GAAG,MAAM;AACjByD,IAAAA,OAAO,GAAG,EAAV;AACAC,IAAAA,eAAe,GAAG,CAAlB;;AACA,QAAI,CAACgB,YAAL,EAAmB;AACfD,MAAAA,KAAK,CAACM,OAAN,CAAcC,GAAG,IAAI;AACjB,YAAInC,IAAI,GAAGmC,GAAG,CAACC,IAAJ,GAAWC,IAAtB;AACA,YAAI/F,cAAc,GAAG6F,GAAG,CAACC,IAAJ,GAAW9F,cAAhC;;AACA,YAAI0D,IAAI,CAACsC,WAAL,GAAmBC,QAAnB,CAA4Bd,SAAS,CAACa,WAAV,EAA5B,KAAwDH,GAAG,CAACK,EAAJ,IAAU/B,IAAI,CAACK,GAAvE,IAA8ES,OAA9E,IAAyFA,OAAO,CAACgB,QAAR,CAAiBJ,GAAG,CAACK,EAArB,CAA7F,EAAuH;AACnH,cAAIC,KAAK,GAAG,CAAZ;AACAtB,UAAAA,cAAc,CAACe,OAAf,CAAuBQ,GAAG,IAAI;AAC1B,gBAAIA,GAAG,CAACC,QAAJ,IAAgBR,GAAG,CAACC,IAAJ,GAAWQ,EAA/B,EAAmCH,KAAK;AAC3C,WAFD;AAGA7B,UAAAA,OAAO,CAACC,eAAD,CAAP,GAA2B,CAAC;AAACb,YAAAA,IAAI,EAAEmC,GAAG,CAACC,IAAJ,GAAWC,IAAlB;AAAwBG,YAAAA,EAAE,EAAEL,GAAG,CAACC,IAAJ,GAAWQ,EAAvC;AAA2CC,YAAAA,SAAS,EAAEJ,KAAtD;AAA6D7C,YAAAA,EAAE,EAAEtD;AAAjE,WAAD,CAA3B;AACAuE,UAAAA,eAAe;AAClB;AACJ,OAXD;AAYH,KAbD,MAaO,CAAE;;AACT,WAAOD,OAAP;AACH,GAlBD;;AAqBA,sBACI;AAAA,cACK,CAACH,IAAD,GAAQ1B,OAAO,CAACY,IAAR,CAAa,QAAb,CAAR,gBAAiC;AAAK,MAAA,SAAS,EAAEb,OAAO,CAAC1C,IAAxB;AAAA,8BAC9B,QAAC,GAAD;AAAK,QAAA,CAAC,EAAE,CAAR;AAAW,QAAA,KAAK,EAAE;AAAC0G,UAAAA,YAAY,EAAE;AAAf,SAAlB;AAAA,+BACI,QAAC,UAAD;AAAY,UAAA,OAAO,EAAC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAD8B,eAM9B,QAAC,OAAD;AAAS,QAAA,OAAO,EAAC,QAAjB;AAA0B,QAAA,KAAK,EAAE;AAACA,UAAAA,YAAY,EAAE;AAAf;AAAjC;AAAA;AAAA;AAAA;AAAA,cAN8B,eAO9B,QAAC,GAAD;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAEhE,OAAO,CAAChC,OAAxB;AAAA,kCACI,QAAC,UAAD;AAAY,YAAA,OAAO,EAAC,WAApB;AAAgC,YAAA,OAAO,EAAC,QAAxC;AACY,YAAA,KAAK,EAAE;AAACC,cAAAA,UAAU,EAAE,MAAb;AAAqBP,cAAAA,cAAc,EAAE;AAArC,aADnB;AAAA,uBAEKmF,MAFL;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI,QAAC,GAAD;AAAK,YAAA,SAAS,EAAE7C,OAAO,CAAC5B,SAAxB;AAAA,oCACI,QAAC,UAAD;AAAY,cAAA,OAAO,EAAC,QAApB;AAA6B,cAAA,KAAK,EAAE;AAACF,gBAAAA,WAAW,EAAE;AAAd,eAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAK,cAAA,SAAS,EAAE8B,OAAO,CAAC3B,MAAxB;AAAA,sCACI;AAAK,gBAAA,SAAS,EAAE2B,OAAO,CAACf,UAAxB;AAAA,uCACI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII,QAAC,SAAD;AACI,gBAAA,SAAS,EAAE,IADf;AAEI,gBAAA,WAAW,EAAC,cAFhB;AAGI,gBAAA,OAAO,EAAE;AACL3B,kBAAAA,IAAI,EAAE0C,OAAO,CAACZ,SADT;AAEL6E,kBAAAA,KAAK,EAAEjE,OAAO,CAACV;AAFV,iBAHb;AAOI,gBAAA,KAAK,EAAE;AACH5B,kBAAAA,cAAc,EAAE,QADb;AAEHS,kBAAAA,UAAU,EAAE;AAFT,iBAPX;AAYI,gBAAA,UAAU,EAAE;AAAC,gCAAc;AAAf,iBAZhB;AAaI,gBAAA,QAAQ,EAAE6E;AAbd;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAP8B,eAwC9B,QAAC,eAAD;AAAiB,QAAA,KAAK,EAAE3E,MAAM;AAA9B;AAAA;AAAA;AAAA;AAAA,cAxC8B;AAAA;AAAA;AAAA;AAAA;AAAA;AADtC,mBADJ;AA8CH;;IAtGQqD,I;UAEWtE,S,EACAD,U,EACDtB,Y,EAWoBE,iB,EAEfA,iB,EAWUD,a;;;MA5BzB4F,I;;AAwGT,SAASwC,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,sBACI,QAAC,GAAD;AAAK,IAAA,CAAC,EAAE,CAAR;AAAA,2BACI,QAAC,IAAD;AAAM,MAAA,SAAS,MAAf;AAAgB,MAAA,OAAO,EAAE,CAAzB;AAAA,gBACKA,KAAK,CAACA,KAAN,CAAYC,GAAZ,CAAgBlD,IAAI,iBAAI,QAAC,IAAD;AAAM,QAAA,IAAI,EAAEA;AAAZ;AAAA;AAAA;AAAA;AAAA,cAAxB;AADL;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH;;MARQgD,e;;AAUT,SAASX,IAAT,CAAcrC,IAAd,EAAoB;AAChB,MAAIM,MAAM,GAAG,iBAAb;AACA,sBAEI,QAAC,WAAD;AACIN,IAAAA,IAAI,EAAEA,IAAI,CAACA,IAAL,CAAU,CAAV,EAAaA,IADvB;AAEIO,IAAAA,WAAW,EAAEP,IAAI,CAACA,IAAL,CAAU,CAAV,EAAa6C,SAF9B;AAGIvC,IAAAA,MAAM,EAAEA,MAHZ;AAIIT,IAAAA,YAAY,EAAEG,IAAI,CAACA,IAAL,CAAU,CAAV,EAAawC,EAJ/B;AAKIzC,IAAAA,KAAK,EAAEpB,MALX;AAMIiB,IAAAA,EAAE,EAAEI,IAAI,CAACA,IAAL,CAAU,CAAV,EAAaJ;AANrB;AAAA;AAAA;AAAA;AAAA,UAFJ;AAYH;;MAdQyC,I;AAgBT,eAAe7B,IAAf","sourcesContent":["import React, {useState} from 'react';\nimport './App.css';\nimport firebase, {auth} from \"./firebase\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport {useCollection, useCollectionData} from \"react-firebase-hooks/firestore\";\nimport {makeStyles} from \"@material-ui/styles\";\nimport {Avatar, Badge, Box, Divider, fade, Grid, IconButton, InputBase, Paper, Typography} from \"@material-ui/core\";\nimport {MailOutline} from \"@material-ui/icons\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\nimport pink from \"@material-ui/core/colors/pink\"\nimport blue from \"@material-ui/core/colors/blue\"\nimport red from \"@material-ui/core/colors/red\"\nimport green from \"@material-ui/core/colors/green\"\nimport yellow from \"@material-ui/core/colors/yellow\"\nimport {useHistory} from \"react-router-dom\";\n\n// TODO\n//  (still present after pauls update at 2:33 UK)\n//  Catch when user is not logged\n//  Fix bug when user is not signed in with google\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    profilePicture: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        margin: \"10px\",\n        border: \"0px solid black\",\n        width: \"50px\",\n        height: \"50px\",\n        '&:hover': {\n            cursor: \"pointer\",\n        }\n    },\n    sorting: {\n        marginLeft: \"30px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        marginRight: \"30px\",\n        alignItems: \"center\",\n    },\n    searchBox: {\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        marginRight: \"30px\",\n        alignItems: \"center\",\n    },\n    search: {\n        flexGrow: 1,\n        maxWidth: \"100%\",\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n            backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        [theme.breakpoints.up('sm')]: {\n            marginLeft: theme.spacing(3),\n            width: 'auto',\n        },\n        width: '100%',\n    },\n    searchIcon: {\n        padding: theme.spacing(0, 2),\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: 'inherit',\n    },\n    inputInput: {\n        padding: theme.spacing(1, 1, 1, 0),\n        // vertical padding + font size from searchIcon\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n        transition: theme.transitions.create('width'),\n        width: '100%',\n    },\n    textBox: {\n        '&:hover': {\n            cursor: \"pointer\",\n        }\n    }\n}))\n\nconst firestore = firebase.firestore();\nvar userID = null;\n\nfunction ProfileCard(props) {\n    const classes = useStyles();\n    const history = useHistory();\n    const colours = [deepOrange[500], pink[400], blue[300], red[500], green[500], yellow[500]];\n\n    function randomChoice(arr) {\n        return arr[Math.floor(arr.length * Math.random())];\n    }\n\n    const avatarColour = randomChoice(colours);\n\n\n    function redirect(path, state) {\n        history.push(path, state)\n    }\n\n\n    return (\n        <Grid item xs={12} sm={6} md={4} lg={3}>\n            <Paper>\n                <Box p={1}>\n                    <Grid container>\n                        <Grid item xs={3}>\n                            <Avatar src={props.pp} className={classes.profilePicture} alt=\"Profile Image\"\n                                    style={{backgroundColor: `${avatarColour}`}} onClick={() => {\n                                redirect(\"/profile\", {\n                                    targetUserID: props.targetUserID,\n                                    currentUserID: props.myUid\n                                })\n                            }}>\n                                {props.name ? props.name.charAt(0) : \"N\"}\n                            </Avatar>\n                        </Grid>\n                        <Grid container item xs={7} className={classes.textBox} onClick={() => {\n                            redirect(\"/chatroom\", {\n                                targetUserID: props.targetUserID,\n                                currentUserID: props.myUid,\n                                myUID: userID\n                            })\n                        }}>\n                            <Grid item xs={12}>\n                                <Typography variant=\"h5\" style={{fontSize: \"24px\"}} display=\"block\">\n                                    {props.name.charAt(0).toUpperCase() + props.name.substr(1)}\n                                </Typography>\n                            </Grid>\n                            <Grid item xs={12}>\n                                <Typography variant=\"body2\" style={{fontSize: \"18px\"}} color=\"textSecondary\"\n                                            display=\"block\">\n                                    {props.unread}\n                                </Typography>\n                            </Grid>\n                        </Grid>\n                        <Grid container item xs={2} className={classes.textBox} onClick={() => {\n                            redirect(\"/chatroom\", {\n                                targetUserID: props.targetUserID,\n                                currentUserID: props.myUid,\n                                myUID: userID\n                            })\n                        }}>\n                            <Box display=\"flex\" alignItems=\"center\" justifyContent=\"flex-end\">\n                                <Badge badgeContent={props.unseenCount} color=\"secondary\">\n                                    <IconButton>\n                                        <MailOutline style={{fontSize: \"38px\",}}/>\n                                    </IconButton>\n                                </Badge>\n                            </Box>\n                        </Grid>\n                    </Grid>\n                </Box>\n            </Paper>\n        </Grid>\n    )\n}\n\nfunction Chat() {\n\n    const classes = useStyles();\n    const history = useHistory();\n    const [user] = useAuthState(auth);\n    const [searchTerm, setSearchTerm] = useState(\"\")\n\n    var results = [];\n    var numberOfResults = 0;\n\n    if (user != null) userID = user.uid;\n\n    const userRef = firestore.collection('users').where('ID', \"==\", userID);\n    const unseenMessagesRef = firestore.collection('users/' + userID + \"/chats\").where('seen', \"==\", \"false\");\n\n    var [unseenMessages, loadingMes] = useCollectionData(unseenMessagesRef);\n\n    var [me, loading] = useCollectionData(userRef);\n    var myChats = [];\n    if (!loading) myChats = me[0].chattingWith;\n    const [searchVal, setSearch] = useState(\"\");\n\n    var unseen = 0;\n\n    if (!loadingMes) {\n        unseen = unseenMessages.length;\n    }\n\n    const [users, loadingUsers] = useCollection(firestore.collection('users'));\n\n    const editSearchTerm = (e) => {\n        setSearch(e.target.value);\n    }\n\n    // Searching for a user\n    const search = () => {\n        results = [];\n        numberOfResults = 0;\n        if (!loadingUsers) {\n            users.forEach(usr => {\n                let name = usr.data().Name;\n                let profilePicture = usr.data().profilePicture;\n                if (name.toLowerCase().includes(searchVal.toLowerCase()) && usr.id != user.uid && myChats && myChats.includes(usr.id)) {\n                    var count = 0\n                    unseenMessages.forEach(msg => {\n                        if (msg.SenderID == usr.data().ID) count++;\n                    })\n                    results[numberOfResults] = [{name: usr.data().Name, id: usr.data().ID, unseenMes: count, pp: profilePicture}];\n                    numberOfResults++;\n                }\n            })\n        } else {}\n        return results;\n    }\n\n\n    return (\n        <>\n            {!user ? history.push(\"./menu\") : <div className={classes.root}>\n                <Box m={3} stlye={{marginBottom: \"-30px\"}}>\n                    <Typography variant=\"h2\">\n                        Your Chats\n                    </Typography>\n                </Box>\n                <Divider variant=\"middle\" style={{marginBottom: \"20px\"}}/>\n                <Box className=\"sortingRow\">\n                    <div className={classes.sorting}>\n                        <Typography variant=\"subtitle1\" display=\"inline\"\n                                    stlye={{marginLeft: \"20px\", justifyContent: \"flex-start\",}}>\n                            {unseen} unseen messages\n                        </Typography>\n                        <Box className={classes.searchBox}>\n                            <Typography display=\"inline\" style={{marginRight: \"10px\"}}>\n                                Filter:\n                            </Typography>\n                            <div className={classes.search}>\n                                <div className={classes.searchIcon}>\n                                    <SearchIcon/>\n                                </div>\n                                <InputBase\n                                    fullWidth={true}\n                                    placeholder=\"Search…\"\n                                    classes={{\n                                        root: classes.inputRoot,\n                                        input: classes.inputInput,\n                                    }}\n                                    style={{\n                                        justifyContent: \"center\",\n                                        alignItems: \"center\",\n                                    }}\n\n                                    inputProps={{'aria-label': 'search'}}\n                                    onChange={editSearchTerm}\n                                />\n                            </div>\n                        </Box>\n                    </div>\n                </Box>\n                <ResultContainer names={search()}/>\n            </div>}\n        </>\n    )\n}\n\nfunction ResultContainer(names) {\n    return (\n        <Box p={3}>\n            <Grid container spacing={3}>\n                {names.names.map(name => <Name name={name}/>)}\n            </Grid>\n        </Box>\n    )\n}\n\nfunction Name(name) {\n    var unread = \"No new messages\"\n    return (\n\n        <ProfileCard {...{\n            name: name.name[0].name,\n            unseenCount: name.name[0].unseenMes,\n            unread: unread,\n            targetUserID: name.name[0].id,\n            myUid: userID,\n            pp: name.name[0].pp\n\n        }} />\n    )\n}\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}